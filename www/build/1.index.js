(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,function(e,t,n){"use strict";n.r(t);var r=n(3),l=n.n(r),a=n(9),c=n.n(a),o=n(5),i=n(6),s=n(2);n(13);const u=({nowTimestamp:e})=>{const[t,n]=Object(r.useState)(e),[a,c]=Object(r.useState)([]),[o,i]=Object(r.useState)(0),[s,u]=Object(r.useState)(0),[f,h]=Object(r.useState)(0),[d,m]=Object(r.useState)(0);return Object(r.useEffect)(()=>{const r=1/(e-t)*1e3;a.push(r),a.length>100&&a.shift();let l=1/0,o=-1/0,s=0;for(let e=0;e<a.length;e++)s+=a[e],l=Math.min(a[e],l),o=Math.max(a[e],o);let f=s/a.length;f===1/0&&(f=0),l===1/0&&(l=0),o===1/0&&(o=0),n(e),c(a),i(Math.round(r)),u(Math.round(f)),h(Math.round(l)),m(Math.round(o))},[e]),l.a.createElement("div",{id:"fps"},l.a.createElement("h4",null,"Frames per Second:"),l.a.createElement("p",null,"latest: ",o),l.a.createElement("p",null,"mean of last 100: ",s),l.a.createElement("p",null,"min of last 100: ",f),l.a.createElement("p",null,"max of last 100: ",d))},f=s.b.new(),h=f.width();f.height();let d,m,p=null;const w=(e,t)=>e*h+t,g=()=>{m(performance.now());for(let e=0;e<3;e++)f.tick();d(),p=requestAnimationFrame(g)},b=()=>{f.clear(),d()},E=()=>{f.reset(),d()},_=()=>{g()},v=()=>{cancelAnimationFrame(p),p=null},y=()=>{const[e,t]=Object(r.useState)("⏸");return l.a.createElement("button",{id:"play-pause",onClick:()=>{(()=>null===p)()?(t("⏸"),_()):(t("▶"),v())}},e)},M=()=>l.a.createElement("div",{id:"state-btns"},l.a.createElement(y,null),l.a.createElement("button",{id:"clear-btn",onClick:b},"Clear"),l.a.createElement("button",{id:"reset-btn",onClick:E},"Reset"));n(14);const j=f.width(),k=f.height();let O,A,C,S,F,T,x=[];const I=()=>{(()=>{const e=f.cells(),t=f.changed_cells(),n=2*f.changed_cells_length(),r=new Uint8Array(i.f.buffer,e,j*k),l=new Uint16Array(i.f.buffer,t,n);let a,c,o,u;for(let e=0;e<n;e+=2)c=l[e],o=l[e+1],u=w(c,o),a=x[c][o],r[u]===s.a.Alive?F.add(a):F.remove(a);f.changed_cells_clear()})(),A.render(C,S)},$=e=>{const t=A.domElement,n=t.getBoundingClientRect(),r=t.clientWidth/n.width,l=t.clientHeight/n.height,a=(e.clientX-n.left)*r,c=(e.clientY-n.top)*l,o=Math.min(Math.floor(c/T),k-1),i=Math.min(Math.floor(a/T),j-1);console.log(`canvasTop: ${c/T}, canvasLeft: ${a/T}`);const s=Math.min(k-o-1,k-1);console.log(`${i}x${o}, threeRow: ${s}`),e.altKey?f.insert_glider(s,i):e.shiftKey?f.insert_pulsar(s,i):f.toggle_cell(s,i),I()},R=e=>{const t=(O=e).clientWidth,n=O.clientHeight;T=Math.ceil(Math.min(t/j,n/k)),console.log(`CELL_SIZE: ${T}`);const r=T*j/2,l=T*k/2,a=Math.ceil(Math.max(r/Math.tan(50*Math.PI/180),l/Math.tan(50*Math.PI/180)));(S=new o.e(100,t/n,.1,1e3)).position.set(r,l,a),(A=new o.i({antialias:!0})).setSize(t,n),A.domElement.onclick=$,O.appendChild(A.domElement),(C=new o.f).background=new o.a("#FFFFFF"),F=new o.b,C.add(F),(()=>{const e=new o.d({color:"#000000",wireframe:!1}),t=f.cells(),n=new Uint8Array(i.f.buffer,t,j*k);let r;for(let t=0;t<k;t++){r=[];for(let l=0;l<j;l++){const a=l*T,c=t*T,i=new o.g;i.moveTo(a,c).lineTo(a,c+T).lineTo(a+T,c+T).lineTo(a+T,c).lineTo(a,c);const u=new o.h(i),f=new o.c(u,e);r.push(f),n[w(t,l)]===s.a.Alive&&F.add(f)}x.push(r)}})()},L=({preRenderCallback:e})=>{const t=Object(r.useRef)(null);return Object(r.useEffect)(()=>(R(t.current),((e,t)=>{d=e,m=t})(I,e),_(),()=>{v(),O.removeChild(A.domElement)}),[]),l.a.createElement("div",null,l.a.createElement("div",{className:"canvas-container",style:{width:"500px",height:"500px"},ref:t}))},N=()=>{const[e,t]=Object(r.useState)(performance.now());return l.a.createElement("div",{className:"animation-container"},l.a.createElement("div",null,l.a.createElement("h3",{className:"title"},"WebGL"),l.a.createElement(M,null),l.a.createElement(u,{nowTimestamp:e})),l.a.createElement(L,{preRenderCallback:t}))};n(15);c.a.render(l.a.createElement(()=>l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{className:"page-title"},"Conway's Game of Life"),l.a.createElement(N,null)),null),document.getElementById("root"))},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return b})),n.d(t,"g",(function(){return E})),n.d(t,"e",(function(){return _})),n.d(t,"d",(function(){return y})),n.d(t,"f",(function(){return M})),n.d(t,"c",(function(){return j})),n.d(t,"h",(function(){return k}));var r=n(6);const l=new Array(32).fill(void 0);function a(e){return l[e]}l.push(void 0,null,!0,!1);let c=l.length;function o(e){const t=a(e);return function(e){e<36||(l[e]=c,c=e)}(e),t}let i=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});i.decode();let s=null;function u(){return null!==s&&s.buffer===r.f.buffer||(s=new Uint8Array(r.f.buffer)),s}function f(e,t){return i.decode(u().subarray(e,e+t))}let h=null;function d(){return null!==h&&h.buffer===r.f.buffer||(h=new Int32Array(r.f.buffer)),h}let m=0,p=new TextEncoder("utf-8");const w="function"==typeof p.encodeInto?function(e,t){return p.encodeInto(e,t)}:function(e,t){const n=p.encode(e);return t.set(n),{read:e.length,written:n.length}};const g=Object.freeze({Dead:0,0:"Dead",Alive:1,1:"Alive"});class b{static __wrap(e){const t=Object.create(b.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();r.a(e)}width(){return r.t(this.ptr)}height(){return r.l(this.ptr)}cells(){return r.g(this.ptr)}changed_cells(){return r.h(this.ptr)}changed_cells_length(){return r.j(this.ptr)>>>0}changed_cells_clear(){r.i(this.ptr)}toggle_cell(e,t){r.s(this.ptr,e,t)}static new(){var e=r.o();return b.__wrap(e)}reset(){r.q(this.ptr)}clear(){r.k(this.ptr)}render(){try{const n=r.b(-16);r.p(n,this.ptr);var e=d()[n/4+0],t=d()[n/4+1];return f(e,t)}finally{r.b(16),r.c(e,t)}}tick(){r.r(this.ptr)}insert_glider(e,t){r.m(this.ptr,e,t)}insert_pulsar(e,t){r.n(this.ptr,e,t)}}function E(e){o(e)}const _="function"==typeof Math.random?Math.random:(v="Math.random",()=>{throw new Error(`${v} is not defined`)});var v;function y(){return function(e){c===l.length&&l.push(l.length+1);const t=c;return c=l[t],l[t]=e,t}(new Error)}function M(e,t){var n=function(e,t,n){if(void 0===n){const n=p.encode(e),r=t(n.length);return u().subarray(r,r+n.length).set(n),m=n.length,r}let r=e.length,l=t(r);const a=u();let c=0;for(;c<r;c++){const t=e.charCodeAt(c);if(t>127)break;a[l+c]=t}if(c!==r){0!==c&&(e=e.slice(c)),l=n(l,r,r=c+3*e.length);const t=u().subarray(l+c,l+r);c+=w(e,t).written}return m=c,l}(a(t).stack,r.d,r.e),l=m;d()[e/4+1]=l,d()[e/4+0]=n}function j(e,t){try{console.error(f(e,t))}finally{r.c(e,t)}}function k(e,t){throw new Error(f(e,t))}},,,,function(e,t,n){"use strict";var r=n.w[e.i];e.exports=r;n(2);r.u()},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){}]]);
//# sourceMappingURL=1.index.js.map