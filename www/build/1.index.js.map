{"version":3,"sources":["webpack:///./src/FPS.tsx","webpack:///./src/renderer.ts","webpack:///./src/StateBtns.tsx","webpack:///./src/WebglAnimation.tsx","webpack:///./src/app.tsx","webpack:///../pkg/wasm_game_of_life_bg.js"],"names":["nowTimestamp","lastFrameTimeStamp","setLastFrameTimeStamp","frames","setFrames","latest","setLatest","mean","setMean","min","setMin","max","setMax","fps","push","length","shift","tmpMin","Infinity","tmpMax","sum","i","Math","tmpMean","round","id","UNIVERSE","new","U_WIDTH","width","height","draw","updateFPS","animationId","getIndex","row","column","renderLoop","performance","now","tick","requestAnimationFrame","clear","reset","startRender","pauseRender","cancelAnimationFrame","ToggleAnimationBtn","text","setText","onClick","isRenderPaused","StateBtns","mount","renderer","scene","camera","group","CELL_SIZE","glCells","cellsPtr","cells","cellsChangedPtr","changed_cells","cellsChangedLength","changed_cells_length","Uint8Array","buffer","cellsChanged","Uint16Array","mesh","col","idx","Alive","add","remove","changed_cells_clear","drawCells","render","canvasClickHandler","event","canvas","domElement","boundingRect","getBoundingClientRect","scaleX","clientWidth","scaleY","clientHeight","canvasLeft","clientX","left","canvasTop","clientY","top","floor","console","log","threeRow","altKey","insert_glider","shiftKey","insert_pulsar","toggle_cell","init","mountRef","mountWidth","mountHeight","ceil","cameraX","cameraY","cameraZ","tan","PI","position","set","antialias","setSize","onclick","appendChild","background","material","color","wireframe","cellRow","x_position","y_position","squareShape","moveTo","lineTo","geometry","initCells","Webgl","preRenderCallback","current","animationDraw","animationUpdateFPS","initRenderer","removeChild","className","style","ref","WebglAnimation","timestamp","setTimestamp","Fragment","document","getElementById","heap","Array","fill","undefined","getObject","heap_next","takeObject","ret","dropObject","cachedTextDecoder","TextDecoder","ignoreBOM","fatal","decode","cachegetUint8Memory0","getUint8Memory0","getStringFromWasm0","ptr","len","subarray","cachegetInt32Memory0","getInt32Memory0","Int32Array","WASM_VECTOR_LEN","cachedTextEncoder","TextEncoder","encodeString","encodeInto","arg","view","buf","encode","read","written","Cell","Object","freeze","Dead","Universe","obj","create","prototype","this","__destroy_into_raw","__wrap","retptr","r0","r1","__wbindgen_object_drop_ref","arg0","__wbg_random_a582babfa4489c72","random","what","Error","__wbg_new_59cb74e423758ede","addHeapObject","__wbg_stack_558ba5917b466edd","arg1","ptr0","malloc","realloc","mem","offset","code","charCodeAt","slice","passStringToWasm0","stack","len0","__wbg_error_4bb6c2a97407129a","error","__wbindgen_throw"],"mappings":"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","file":"1.index.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport \"./FPS.scss\";\n\nexport const FPS = ({ nowTimestamp }: { nowTimestamp: number }) => {\n    const [lastFrameTimeStamp, setLastFrameTimeStamp] = useState(nowTimestamp);\n    const [frames, setFrames] = useState([]);\n    const [latest, setLatest] = useState(0);\n    const [mean, setMean] = useState(0);\n    const [min, setMin] = useState(0);\n    const [max, setMax] = useState(0);\n\n    useEffect(() => {\n        const delta = nowTimestamp - lastFrameTimeStamp;\n\n        const fps = 1 / delta * 1000;\n\n        // Save only the latest 100 timings.\n        frames.push(fps);\n        if (frames.length > 100) {\n            frames.shift();\n        }\n\n        // Find the max, min, and mean of our 100 latest timings.\n        let tmpMin = Infinity;\n        let tmpMax = -Infinity;\n        let sum = 0;\n        for (let i = 0; i < frames.length; i++) {\n            sum += frames[i];\n            tmpMin = Math.min(frames[i], tmpMin);\n            tmpMax = Math.max(frames[i], tmpMax);\n        }\n        let tmpMean = sum / frames.length;\n\n        if (tmpMean === Infinity) tmpMean = 0;\n        if (tmpMin === Infinity) tmpMin = 0;\n        if (tmpMax === Infinity) tmpMax = 0;\n\n        setLastFrameTimeStamp(nowTimestamp);\n        setFrames(frames);\n        setLatest(Math.round(fps));\n        setMean(Math.round(tmpMean));\n        setMin(Math.round(tmpMin));\n        setMax(Math.round(tmpMax));\n\n    }, [nowTimestamp]);\n\n    return (\n        <div id=\"fps\">\n            <h4>Frames per Second:</h4>\n            <p>latest: {latest}</p>\n            <p>mean of last 100: {mean}</p>\n            <p>min of last 100: {min}</p>\n            <p>max of last 100: {max}</p>\n        </div>\n    );\n};\n","import { Universe } from \"../../pkg/wasm_game_of_life\";\n\n//** Typings **//\n\nexport type CanvasPrerenderCallback = (nowTimestamp: number) => void;\n\n//** Universe **//\n\nexport const UNIVERSE = Universe.new();\nconst U_WIDTH = UNIVERSE.width();\nconst U_HEIGHT = UNIVERSE.height();\n\n//** Implementation specific functions **//\n\nlet draw: Function;\nlet updateFPS: CanvasPrerenderCallback;\n\n//** General **//\n\nlet animationId: number = null;\n\n//** Helper functions **//\n\nexport const getIndex = (row: number, column: number) => {\n    return row * U_WIDTH + column;\n};\n\n//** Rendering **//\n\nconst renderLoop = () => {\n    updateFPS(performance.now());\n\n    for (let i=0; i < 3; i++)\n        UNIVERSE.tick();\n\n    draw();\n\n    animationId = requestAnimationFrame(renderLoop);\n};\n\n// ** State functions **//\n\nexport const clear = () => {\n    UNIVERSE.clear();\n    draw();\n};\n\nexport const reset = () => {\n    UNIVERSE.reset();\n    draw();\n};\n\nexport const startRender = () => {\n    renderLoop();\n};\n\nexport const pauseRender = () => {\n    cancelAnimationFrame(animationId);\n    animationId = null;\n};\n\nexport const isRenderPaused = () => {\n    return animationId === null;\n};\n\n//** Initialization **//\n\nexport const initRenderer = (animationDraw: Function, animationUpdateFPS: CanvasPrerenderCallback) => {\n    draw = animationDraw;\n    updateFPS = animationUpdateFPS;\n};\n","import React, { useState } from \"react\";\nimport { clear, isRenderPaused, pauseRender, startRender, reset } from \"./renderer\";\n\nconst ToggleAnimationBtn = () => {\n    const [text, setText] = useState(\"⏸\");\n\n    const toggleRendering = () => {\n        if (!isRenderPaused()) {\n            setText(\"▶\");\n            pauseRender();\n        } else {\n            setText(\"⏸\");\n            startRender();\n        }\n    };\n\n    return (\n        <button id=\"play-pause\" onClick={toggleRendering}>{text}</button>\n    );\n};\n\nexport const StateBtns = () => {\n   return (\n       <div id={'state-btns'}>\n           <ToggleAnimationBtn/>\n           <button id=\"clear-btn\" onClick={clear}>Clear</button>\n           <button id=\"reset-btn\" onClick={reset}>Reset</button>\n       </div>\n   );\n};\n","///<reference path=\"../node_modules/three/src/Three.d.ts\" />\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport \"three\";\n// @ts-ignore\nimport * as THREE from \"three\";\n\nimport { memory } from \"wasm-game-of-life/wasm_game_of_life_bg.wasm\";\nimport { Cell } from \"wasm-game-of-life\";\nimport { FPS } from \"./FPS\";\nimport { StateBtns } from \"./StateBtns\";\nimport {\n    UNIVERSE,\n    startRender,\n    pauseRender,\n    getIndex,\n    initRenderer,\n    CanvasPrerenderCallback,\n} from \"./renderer\";\n\nimport \"./animation.scss\";\n\n//** Constants **//\n\nconst CANVAS_WIDTH: string = \"500px\";\nconst CANVAS_HEIGHT: string = \"500px\";\n\nconst DEAD_COLOR = \"#FFFFFF\";\nconst ALIVE_COLOR = \"#000000\";\n\nconst U_WIDTH = UNIVERSE.width();\nconst U_HEIGHT = UNIVERSE.height();\n\n//** HTML Elements **//\n\nlet mount: HTMLDivElement;\n\n//** General **//\n\nlet renderer: any;\nlet scene: any;\nlet camera: any;\nlet group: any;\nlet glCells: any = [];\nlet CELL_SIZE: number;\n\n//** Drawing Functions **//\n\nconst drawCells = ()=> {\n    const cellsPtr = UNIVERSE.cells();\n    const cellsChangedPtr = UNIVERSE.changed_cells();\n    const cellsChangedMultiplier = 2;\n    const cellsChangedLength = UNIVERSE.changed_cells_length() * cellsChangedMultiplier;\n    // directly access the WebAssembly's memory as a linear buffer\n    const cells = new Uint8Array(memory.buffer, cellsPtr, U_WIDTH * U_HEIGHT);\n    const cellsChanged = new Uint16Array(memory.buffer, cellsChangedPtr, cellsChangedLength);\n\n    let mesh: any;\n    let row: number, col: number, idx: number;\n    for (let i=0; i < cellsChangedLength; i += cellsChangedMultiplier) {\n        row = cellsChanged[i];\n        col = cellsChanged[i+1];\n        idx = getIndex(row, col);\n\n        mesh = glCells[row][col];\n\n        if (cells[idx] === Cell.Alive) {\n            group.add(mesh);\n        } else {\n            group.remove(mesh);\n        }\n    }\n\n    UNIVERSE.changed_cells_clear();\n};\n\nconst draw = () => {\n    drawCells();\n    renderer.render(scene, camera);\n};\n\n//** Event Listeners **/\n\nconst canvasClickHandler = (event: MouseEvent) => {\n    const canvas = renderer.domElement;\n    // Get the canvas coordinates within the browser window\n    const boundingRect = canvas.getBoundingClientRect();\n\n    const scaleX = canvas.clientWidth / boundingRect.width;\n    const scaleY = canvas.clientHeight / boundingRect.height;\n\n    // Determine click coordinates within the canvas\n    const canvasLeft = (event.clientX - boundingRect.left) * scaleX;\n    const canvasTop = (event.clientY - boundingRect.top) * scaleY;\n\n    // Determine the cell clicked based on the canvas coordinates\n    const row = Math.min(Math.floor(canvasTop / (CELL_SIZE)), U_HEIGHT - 1);\n    const col = Math.min(Math.floor(canvasLeft / (CELL_SIZE)), U_WIDTH - 1);\n    console.log(`canvasTop: ${canvasTop / CELL_SIZE}, canvasLeft: ${canvasLeft / CELL_SIZE}`);\n\n    // Invert row since threeJS uses traditional cartesian coordinates for y-axis\n    const threeRow = Math.min(U_HEIGHT - row - 1, U_HEIGHT - 1);\n\n    console.log(`${col}x${row}, threeRow: ${threeRow}`);\n\n    if (event.altKey) {\n        UNIVERSE.insert_glider(threeRow, col);\n    } else if (event.shiftKey) {\n        UNIVERSE.insert_pulsar(threeRow, col);\n    } else {\n        UNIVERSE.toggle_cell(threeRow, col);\n    }\n\n    draw();\n};\n\n//** Initialization **//\n\nconst initCells = () => {\n    const material = new THREE.MeshBasicMaterial({ color: ALIVE_COLOR, wireframe: false });\n    const cellsPtr = UNIVERSE.cells();\n    // directly access the WebAssembly's memory as a linear buffer\n    const cells = new Uint8Array(memory.buffer, cellsPtr, U_WIDTH * U_HEIGHT);\n\n    let cellRow: any[];\n    for (let row = 0; row < U_HEIGHT; row++) {\n        cellRow = [];\n        for (let col = 0; col < U_WIDTH; col++) {\n            const x_position = col * CELL_SIZE;\n            const y_position = row * CELL_SIZE;\n\n            const squareShape: any = new THREE.Shape();\n            squareShape.moveTo( x_position, y_position )\n                .lineTo( x_position, y_position + CELL_SIZE )\n                .lineTo( x_position + CELL_SIZE, y_position + CELL_SIZE )\n                .lineTo( x_position + CELL_SIZE, y_position )\n                .lineTo( x_position, y_position );\n\n            const geometry = new THREE.ShapeGeometry(squareShape);\n            const mesh = new THREE.Mesh(geometry, material);\n\n            cellRow.push(mesh);\n\n            const idx = getIndex(row, col);\n            if (cells[idx] === Cell.Alive) group.add(mesh);\n        }\n        glCells.push(cellRow);\n    }\n};\n\nconst init = (mountRef: HTMLDivElement) => {\n    const FOV = 100;\n\n    mount = mountRef;\n\n    const mountWidth = mount.clientWidth;\n    const mountHeight = mount.clientHeight;\n\n    CELL_SIZE = Math.ceil(Math.min((mountWidth/U_WIDTH), (mountHeight/U_HEIGHT)));\n    console.log(`CELL_SIZE: ${CELL_SIZE}`);\n\n    // Calculate center point of Universe\n    const cameraX = (CELL_SIZE * U_WIDTH) / 2;\n    const cameraY = (CELL_SIZE * U_HEIGHT) / 2;\n\n    // Determine camera distance required to view all cells in Universe\n    const cameraZ = Math.ceil(Math.max(\n        cameraX / Math.tan((FOV / 2) * Math.PI / 180),\n        cameraY / Math.tan((FOV / 2) * Math.PI / 180),\n    ));\n\n    camera = new THREE.PerspectiveCamera(FOV, mountWidth / mountHeight, 0.1, 1000);\n    camera.position.set( cameraX, cameraY, cameraZ);\n\n    renderer = new THREE.WebGLRenderer({ antialias: true });\n    renderer.setSize(mountWidth, mountHeight);\n    renderer.domElement.onclick = canvasClickHandler;\n\n    mount.appendChild(renderer.domElement);\n\n    scene = new THREE.Scene();\n    //@ts-ignore\n    scene.background = new THREE.Color(DEAD_COLOR);\n\n    group = new THREE.Group();\n\n    scene.add(group);\n\n    initCells();\n};\n\n//** Components **//\n\nconst Webgl = ({ preRenderCallback }: { preRenderCallback: CanvasPrerenderCallback }) => {\n    const mountRef = useRef(null);\n\n    useEffect(() => {\n       init(mountRef.current);\n       initRenderer(draw, preRenderCallback);\n       startRender();\n\n       return () => {\n         pauseRender();\n         mount.removeChild(renderer.domElement);\n       };\n    }, []);\n\n    return (\n        <div>\n            <div\n                className=\"canvas-container\"\n                style={{ width: CANVAS_WIDTH, height: CANVAS_HEIGHT }}\n                ref={mountRef}\n            />\n        </div>\n    );\n};\n\nexport const WebglAnimation = () => {\n    const [timestamp, setTimestamp] = useState(performance.now());\n\n    return (\n        <div className={'animation-container'}>\n            <div>\n                <h3 className={'title'}>WebGL</h3>\n                <StateBtns/>\n                <FPS nowTimestamp={timestamp}/>\n            </div>\n            <Webgl preRenderCallback={setTimestamp}/>\n        </div>\n    );\n};\n","import React from 'react';\nimport ReactDom from 'react-dom';\n// import { CanvasAnimation } from \"./CanvasAnimation\";\nimport { WebglAnimation } from './WebglAnimation';\n\nimport './app.scss';\n\n//** Components\n\n// NOTE: Change animation component here\nconst App = () => {\n    return (\n        <React.Fragment>\n            <h1 className={'page-title'}>Conway's Game of Life</h1>\n            <WebglAnimation/>\n            {/*<CanvasAnimation/>*/}\n        </React.Fragment>\n    );\n};\n\n//*** INIT ***//\n\nReactDom.render(<App/>, document.getElementById(\"root\"));\n","import * as wasm from './wasm_game_of_life_bg.wasm';\n\nconst heap = new Array(32).fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nfunction getObject(idx) { return heap[idx]; }\n\nlet heap_next = heap.length;\n\nfunction dropObject(idx) {\n    if (idx < 36) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\n\nlet cachedTextDecoder = new TextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nlet cachegetUint8Memory0 = null;\nfunction getUint8Memory0() {\n    if (cachegetUint8Memory0 === null || cachegetUint8Memory0.buffer !== wasm.memory.buffer) {\n        cachegetUint8Memory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachegetUint8Memory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nlet cachegetInt32Memory0 = null;\nfunction getInt32Memory0() {\n    if (cachegetInt32Memory0 === null || cachegetInt32Memory0.buffer !== wasm.memory.buffer) {\n        cachegetInt32Memory0 = new Int32Array(wasm.memory.buffer);\n    }\n    return cachegetInt32Memory0;\n}\n\nfunction notDefined(what) { return () => { throw new Error(`${what} is not defined`); }; }\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nlet cachedTextEncoder = new TextEncoder('utf-8');\n\nconst encodeString = (typeof cachedTextEncoder.encodeInto === 'function'\n    ? function (arg, view) {\n    return cachedTextEncoder.encodeInto(arg, view);\n}\n    : function (arg, view) {\n    const buf = cachedTextEncoder.encode(arg);\n    view.set(buf);\n    return {\n        read: arg.length,\n        written: buf.length\n    };\n});\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n\n    if (realloc === undefined) {\n        const buf = cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length);\n        getUint8Memory0().subarray(ptr, ptr + buf.length).set(buf);\n        WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n\n    let len = arg.length;\n    let ptr = malloc(len);\n\n    const mem = getUint8Memory0();\n\n    let offset = 0;\n\n    for (; offset < len; offset++) {\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7F) break;\n        mem[ptr + offset] = code;\n    }\n\n    if (offset !== len) {\n        if (offset !== 0) {\n            arg = arg.slice(offset);\n        }\n        ptr = realloc(ptr, len, len = offset + arg.length * 3);\n        const view = getUint8Memory0().subarray(ptr + offset, ptr + len);\n        const ret = encodeString(arg, view);\n\n        offset += ret.written;\n    }\n\n    WASM_VECTOR_LEN = offset;\n    return ptr;\n}\n/**\n*/\nexport const Cell = Object.freeze({ Dead:0,\"0\":\"Dead\",Alive:1,\"1\":\"Alive\", });\n/**\n*/\nexport class Universe {\n\n    static __wrap(ptr) {\n        const obj = Object.create(Universe.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_universe_free(ptr);\n    }\n    /**\n    * Get width of the universe\n    * @returns {number}\n    */\n    width() {\n        var ret = wasm.universe_width(this.ptr);\n        return ret;\n    }\n    /**\n    * Get height of the universe\n    * @returns {number}\n    */\n    height() {\n        var ret = wasm.universe_height(this.ptr);\n        return ret;\n    }\n    /**\n    * Provides a pointer to the cells vector\n    * @returns {number}\n    */\n    cells() {\n        var ret = wasm.universe_cells(this.ptr);\n        return ret;\n    }\n    /**\n    * Gets all changed cells\n    * @returns {number}\n    */\n    changed_cells() {\n        var ret = wasm.universe_changed_cells(this.ptr);\n        return ret;\n    }\n    /**\n    * Gets length of the cells that have changed\n    * @returns {number}\n    */\n    changed_cells_length() {\n        var ret = wasm.universe_changed_cells_length(this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    */\n    changed_cells_clear() {\n        wasm.universe_changed_cells_clear(this.ptr);\n    }\n    /**\n    * Provides a JS method for toggling a cell\n    * @param {number} row\n    * @param {number} column\n    */\n    toggle_cell(row, column) {\n        wasm.universe_toggle_cell(this.ptr, row, column);\n    }\n    /**\n    * Creates a new Universe\n    * @returns {Universe}\n    */\n    static new() {\n        var ret = wasm.universe_new();\n        return Universe.__wrap(ret);\n    }\n    /**\n    * Resets the universe to a random initial state\n    */\n    reset() {\n        wasm.universe_reset(this.ptr);\n    }\n    /**\n    * Sets all cells in the universe to dead\n    */\n    clear() {\n        wasm.universe_clear(this.ptr);\n    }\n    /**\n    * Renders a textual representation of the universe in its current state\n    * @returns {string}\n    */\n    render() {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.universe_render(retptr, this.ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            return getStringFromWasm0(r0, r1);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n            wasm.__wbindgen_free(r0, r1);\n        }\n    }\n    /**\n    * Causes a state change for the universe according to the Game's rules\n    */\n    tick() {\n        wasm.universe_tick(this.ptr);\n    }\n    /**\n    * Inserts a glider around cell specified\n    * @param {number} row\n    * @param {number} column\n    */\n    insert_glider(row, column) {\n        wasm.universe_insert_glider(this.ptr, row, column);\n    }\n    /**\n    * Inserts a pulsar around cell specified\n    * @param {number} row\n    * @param {number} column\n    */\n    insert_pulsar(row, column) {\n        wasm.universe_insert_pulsar(this.ptr, row, column);\n    }\n}\n\nexport function __wbindgen_object_drop_ref(arg0) {\n    takeObject(arg0);\n};\n\nexport const __wbg_random_a582babfa4489c72 = typeof Math.random == 'function' ? Math.random : notDefined('Math.random');\n\nexport function __wbg_new_59cb74e423758ede() {\n    var ret = new Error();\n    return addHeapObject(ret);\n};\n\nexport function __wbg_stack_558ba5917b466edd(arg0, arg1) {\n    var ret = getObject(arg1).stack;\n    var ptr0 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    var len0 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len0;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n};\n\nexport function __wbg_error_4bb6c2a97407129a(arg0, arg1) {\n    try {\n        console.error(getStringFromWasm0(arg0, arg1));\n    } finally {\n        wasm.__wbindgen_free(arg0, arg1);\n    }\n};\n\nexport function __wbindgen_throw(arg0, arg1) {\n    throw new Error(getStringFromWasm0(arg0, arg1));\n};\n\n"],"sourceRoot":""}